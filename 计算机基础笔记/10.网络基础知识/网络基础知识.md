# **网络基础知识**

### 计算机网络定义

- 计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统、网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息传递的计算机系统。

### 计算机网络的分类

- 按传输距离分：
  1.  局域网(LAN) 一般分布在几米到几公里范围。
  2. 城域网(MAN) 一般分布在几公里到几十公里或一个城区。
  3. 广域网(WAN) 一般分布在数十公里到几千公里。
- 按工作模式分：
  1. 对等网络（同一个局域网下的设备）
  2. 基于服务器的网络（互联网，如：手机访问百度）
- 按传输介质分：
  1. 有线网络：分为双绞线网络、同轴电缆网络、光纤网络、光纤同轴混合网络等
  2. 无线网络：分为无线电、微波、红外等

### 计算机网络的组成

- 计算机网络由资源子网和通信子网组成：
  1. 资源子网：服务器、工作站
  2. 通信子网：通信设备、传输介质
  3. ![image-20200417002843427](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417002843427.png)

### 网络设备

- **网卡（NIC）**：又称网络适配器。用于计算机和网络电缆之间的物理连接。网卡完成物理层和数据链路层的大部分功能。
  - 每块网卡都有一个唯一的地址，称为MAC地址或物理地址，采用十六进制数表示，共六个字节（48位）。**前三个字节是厂家编码**，**后三个字节由各厂家自行指派**。
  - **工作在物理层与数据链路层**
- **中继器(Repeater)**：是工作在物理层设备。适用于完全相同的两类网络的互连，主要功能是通过对数据信号的复制、整形、放大再发送，来扩大网络传输的距离。
  - **工作在物理层**
  - **不能无限制的添加**
- **集线器**：具有中继器的功能，区别在于集线器能够提供多端口服务，也称多口中继器。集线器是物理层设备。集线器不具备交换机所具有的MAC地址表，所以它发送数据时是没有针对性的，而是采用广播方式发送。
  - **工作在物理层**
  - **所有端口是一个冲突域，所有的端口是一个广播域。**
- **交换机**：也称多端口网桥，工作在数据链路层，能够识别帧的内容。交换机在同一时刻可进行多个端口对之间的数据传输。每一端口都可视为独立的网段，连接在其上的网络设备独自享有全部的带宽，无须同其他设备竞争使用。
  - **工作在数据链路层**
  - **每一个端口是一个冲突域，所有的端口是一个广播域。**
- **二层交换与三层交换**：
  - **二层交换**：二层交换是以硬件的方式执行网桥的功能。通过MAC地址进行转发，同时将端口、所涉及的MAC地址及对应关系记录在地址表中。
  - **三层交换**：三层交换技术就是：二层交换技术+三层转发技术
    - **解决了局域网中网段划分**之后，网段中子网必须依赖路由器进行管理。
    - 三层交换机在对第一个数据流进行路由后，会产生一个MAC地址与IP地址的映射表，当同样的数据流再次通过时，将根据此表直接从二层交换而不是再次路由，从而消除了路由器进行路由选择而造成网络的延迟，提高了数据包转发的效率。
- **路由器**：路由器是网络层的互联设备，用于连接多个逻辑上分开的网络，所谓逻辑网络就是拥有独立网络地址的网络。路由器的工作就是为经过路由器的每个数据帧寻找一条最佳传输路径，并将该数据帧有效地传送到目的站点。
  - **工作在网络层**
  - **每个端口是一个冲突域，每个端口是一个广播域**
- ![image-20200417114504956](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417114504956.png)

## OSI网络参考模型

- OSI七层模型：
  1. 物理层
  2. 数据链路层
  3. 网络层
  4. 传输层
  5. 会话层
  6. 表示层
  7. 应用层
- ![image-20200417114710135](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417114710135.png)
- ![image-20200417114728608](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417114728608.png)

### 物理层

- 是OSI参考模型的最低层或第一层，物理层协议要解决的是主机、工作站等数据终端设备与通信线路上通信设备之间的接口问题。
- 主要的技术特性：
  1. 机械特性：规定了DTE（计算机设备）和DCE（网络连接设备）之间的连接器形式，包括连接器形状、几何尺寸、引线数目和排列方式等
  2. 电气特性：规定了发送器和接收器的电气参数及其他有关电路的特征。如1和0的各自**电压的大小**，每**比特持续多少微秒**等。电气特性**决定了传送速率和传输距离**
  3. 功能特性：接口信号分为数据信号、控制信号和时钟信号。功能特性**对接口各信号线的功能给出确切的定义**，**说明某些连线上出现的某一电压表示的意义**。
  4. 规程特性：规定了DTE和DCE之间各接口信号线实现数据传输的**操作过程（操作顺序）**

### 数据链路层(DataLink)

- **建立、维持和释放网络实体之间的数据链路**，这种数据链路对网络层表现为一条无差错的信道。数据链路层通常把流量控制和差错控制合并在一起。
- 数据链路层分为**MAC（媒介访问控制层）和LLC（逻辑链路控制层）**。
- **服务访问点为MAC地址**。

### 网络层(Network)

- 属于通信子网，网络层解决的问题是**路由选择、网络拥塞、异构网络互联**等问题，其服务访问点为逻辑地址（网络地址）。
- 代表性协议有IP，IPX协议等

### 传输层( Transport)

- 实现发送端和接收端的端到端的数据分组传送，负责保证**实现数据包无差错、按顺序、无丢失和无冗余的传输**。
- **服务访问点为端口**。
- **代表性协议有TCP，UDP，SPX协议等。**

### 会话层( Session)

- 会话层主要功能是**管理和协调不同主机上各种进程之间的通信（对话）**，即**负责建立、管理和终止应用程序之间的会话**。

### 表示层(Prsentation)

- 表示层**处理流经结点的数据编码的表示方式**问题，以**保证一个系统应用层发出的信息可被另一系统的应用层读出**。
- 应用层可以根据其服务解释数据的含义。通常包括数据编码的约定、本地句法的转换、数据压缩与解压缩。例如，JPEG，ASCII，GIF，DES，MPEG等。

### 应用层(Application)

- 直接为端用户服务，提供各类应用程序的接口和用户接口。**例如，HTTP，Telnet，FTP，SMTP等。**

## 网络拓扑结构

- **总线型拓扑结构**：用单总线把各计算机连接起来。
  - 优点：建网容易，增减节点方便，节省线路。
  - 缺点：重负载时通信效率不高。
  - <img src="C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417120739398.png" alt="image-20200417120739398" style="zoom:50%;" />	
- **星型拓扑结构**：每个终端或计算机都以单独（专用）的线路与中央设备相连。**中央设备一般是交换机（集线器）。**
  - 优点：结构简单，建网容易，延迟小，便于管理。
  - 缺点：成本高，中心节点成为系统的瓶颈。
  - <img src="C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417120828449.png" alt="image-20200417120828449" style="zoom:67%;" />	
- **环型拓扑结构**：所有计算机和接口设备连接成一个环，**可以是单环，也可以是双环**。环中信号是**单向传输**的。双环网络中**两个环上信号的传输方向相反**。 特别适合实时控制的局域网系统。
  - <img src="C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417120931936.png" alt="image-20200417120931936" style="zoom:67%;" />	
- **树型拓扑结构**：节点组织成树状结构，具有层次性。它具有较强的可折叠性，非常适用于构建网络主干，还能够有效地保护布线投资。这种拓扑结构的网络一般采用光纤作为网络主干，用于军事单位，政府单位等上、下界限相当严格和层次分明的部门。
  - <img src="C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417121050442.png" alt="image-20200417121050442" style="zoom:80%;" />	
- **网状拓扑结构**：每个节点至少有两条路径与其他节点相连。
  - 优点：可靠性高、可改善线路的信息流量分配、可选择最佳路径，传输延迟小。
  - 缺点：控制复杂，线路成本高。
  - 网状拓扑结构一般用于Internet骨干网上。
  - **![image-20200417121148691](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417121148691.png)**

## IPv4

#### 网络地址及子网掩码

- IP地址是由32位二进制数，即4个字节组成的，由网络号和主机号两个字段组成。
- <img src="C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417121358456.png" alt="image-20200417121358456" style="zoom:80%;" />
- 网络号的位数决定了可以分配的网络数（2n）；主机号的位数决定了网络中最大主机个数（2m-2）
- 为了便于对IP地址进行管理，把IP地址分成为5类，即A类到E类，目前大量使用的是A，B，C三类。
- ![image-20200417121910491](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417121910491.png)

#### 特殊IP地址

- IP定义了一套特殊地址格式，称为保留地址。
- 网络地址：主机号全0表示网络地址
- 广播地址：主机号全1表示广播地址
- 子网掩码：网络号部分全为1，主机号部分全为0；用于计算网络地址用（只需将IP地址和子网掩码做与操作，就可得到网络地址）
- 保留地址：为了满足内网的使用需求，保留了一部分不在公网使用的IP地址。
- ![image-20200417122034402](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417122034402.png)

#### 子网及子网掩码

- <img src="C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417122142377.png" alt="image-20200417122142377" style="zoom:67%;" />	
- 两级IP地址的缺点：
  1. IP地址空间的**利用率低**
  2. 给每一个物理网络分配一个网络号会使路由表变得太大因而**使网络性能变坏**。
- **划分方式自己找资料**

#### 路由汇聚

- 路由汇聚的是把一组路由汇聚为一个单个的路由广播。路由汇聚的最终结果和最明显的好处是缩小网络上的路由表的尺寸。
- 例题：![image-20200417122401944](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417122401944.png)

## IPv6

- Pv6协议，全称“互联网协议第6版”，即下一代的网际协议
- 优点：
  1. 扩展的地址。IPv6地址长度为128位
  2. IPv6使用更小的路由表
  3. 简化的包头（IPv6头减少了字段的数量，提高选路效率）
  4. 流标志（IPv4对所有的包同等对待，路由器并不跟踪任意两台主机间发送的包。而IPv6中引入了流概念，可以对流中的包进行高效处理）
  5. 身份验证和保密（IPv6使用了两种安全性扩展，即IP身份验证头和IP封装安全性净荷）
- IPv6地址表示：IPv6地址的128位是以16位为一组，共分为8组，每组的16位转换为4位的十六进制数字，每组之间用冒号(：)分开。
  - 例如：2001: 0da8: d001: 0001: 0000: 0000: 0000: 0001
  - 压缩表示：2001: da8: d001:1:0:0:0:1或2001: da8: d001:1: :1
- 内嵌IPv4地址的IPv6地址：地址的第一部分使用十六进制表示，而IPv4部分采用十进制。这是过渡机制所用的IPv6地址特有的表示法
  - 例如：fe80:：200: 5efe: `58.20.27.60`
- IPv6地址类型：IPv6仍有三种地址类型，分别是单播、多播（也称组播）、泛播（也称任意播）。在**IPv6里广播不再使用** 。
  1. 单播IPv6地址：单播地址唯一标识一个IPv6节点的接口
  2. 多播IPv6地址：多播地址标识一组IPv6节点的接口
  3. 泛播IPv6地址：泛播地址指派给多个节点的接口。发送往泛播地址的数据包只会传递给其中的一个接口，一般是隔得最近的一个接口
- IPv4向IPv6过渡：双协议栈、隧道技术、NAT-PT

### 常用的网络协议

- TCP/IP协议簇分为应用层、传输层、网际层和网络接口层四层
- ![image-20200417123335615](C:\Users\d16ug-a1l\AppData\Roaming\Typora\typora-user-images\image-20200417123335615.png)
- ARP（地址解析协议）：IP地址是一个逻辑地址，不能被物理网络所识别。ARP给出了将主机的网络地址(IP地址)动态映射为MAC地址的方法。
- RARP（反向地址解析协议）：允许局域网的物理机器从网关服务器的 ARP 表或者缓存上请求其 IP 地址。常用于网络上的无盘工作站。
- DNS域名系统：方便用户访问互联网，而不用去记住能够被机器直接读取的IP数串。通过主机名，最终得到该主机名对应的IP地址的过程叫做域名解析（或主机名解析）。DNS协议运行在UDP协议之上，端口号53。每个域名对应的IP地址可以是一个，也可以是多个。
- DHCP（动态主机配置协议）：是一个局域网的网络协议，使用UDP协议工作， 给内部网络计算机自动分配IP地址、Gateway地址、DNS服务器地址等信息，并能够提升地址的使用率。DHCP协议采用UDP作为传输协议，主机发送请求消息到DHCP服务器的67号端口，DHCP服务器回应应答消息给主机的68号端口。DHCP的默认租约期是8天。

